# Установка и настройка утилит командной строки

Установим несколько утилит облегчающих работу с консолью и выглядящих значительно лучше чем стандартные инструменты. Настройки выполняются с учетом использования `zsh`. Для `bash` эти настройки также будут работать. Для других шеллов требуется скорректировать действия. 

Для применения изменений "на лету" необходимо перезагрузить шелл командой `exec zsh`. Это справедливо для случаев с созданием псевдонимов и скриптов.

## Общие утилиты

Первым делом установим вспомогательные утилиты, инструменты и зависимости, которые могут понадобиться:

```bash
# Сначала обновим репозиторий
sudo apt update
# Установим утилиты
sudo apt install -y zip unzip curl wget gpg pass gcc bsdmainutils fzf ripgrep ca-certificates
```

## Git

В простейшем случае установка и настройка Git выглядит следующим образом:

```bash
sudo apt update
sudo apt -y install git
# Личные данные
git config --global user.name "My Name"
git config --global user.email "my@email.com"
# Исправить кодировку
git config --global core.quotepath off
```

> Более подробно о Git можно почитать здесь: [Git - установка, настройка, использование](Git - установка, настройка, использование.md).

## btop, htop

Далее установим утилиты для мониторинга ресурсов `htop` или `btop`:

```bash
sudo apt install -y btop
```

Настройки `htop` доступны на клавише `F2`. Выход из монитора по клавише `q`. Я обычно устанавливаю немного более продвинутую `btop`. Настройки доступны при нажатии `ESC` и выборе пункта `Option` в меню. Выход, как и в предыдущем случае, на `q`.

Установим псевдоним, для чего добавим в файл `~/.zshrc` следующие строки (или в `~/.bashrc`):

```bash
if [ -x "$(command -v btop)" ]; then
	alias top=btop
fi
```

Теперь по команде `top` будет доступна новая утилита.

## bat

Немного преобразим вывод программы `cat`. Для этого установим пакет `bat`, и сразу создадим ссылку на него (*установщик не создает*):

```bash
sudo apt install -y bat
# создадим ссылку
sudo ln -s $(which batcat) /usr/local/bin/bat
```

И добавим псевдоним в файл `~/.zshrc`:

```bash
if [ -x "$(command -v bat)" ]; then
	alias cat="bat"
fi
```

## duf

Утилита `df` имеет не очень читаемый вывод - для исправления ситуации установим `duf`:

```bash
sudo apt install -y duf
```

И псевдоним:

```bash
if [ -x "$(command -v duf)" ]; then
	alias df="duf"
fi
```

## fastfetch

Это аналог окна "О компьютере" только для Linux и для консоли.

```bash
sudo apt install -y fastfetch
```

> Если утилиты не окажется в репозитории, тогда можно установить `neofetch` - то же самое.

## fd-find

Улучшает дефолтный поиск:

```bash
sudo apt install -y fd-find
```

Псевдоним:

```bash
if [ -x "$(command -v fdfind)" ]; then
	alias find="fdfind"
fi
```

## eza

Одна из самых часто используемых возможностей - вывод списка файлов в директории. С его визуальным (и не только) улучшением может помочь довольно мощная утилита `eza`.

```bash
sudo apt install -y eza
```

Теперь создадим необходимые псевдонимы. Причем эта утилита заменит также `tree`. И несколько псевдонимов, которые обычно создаются для `ls`.

```bash
if [ -x "$(command -v eza)" ]; then
	# обычный ls
	alias ls="eza -l -F --header --icons"
	# показывать скрытые файлы
	alias la="eza -l -F --header --icons -a -g"
	# вывести дерево файлов
	alias tree="eza --icons -a -T"
	# показать директорию git. скрывает .git и файлы из .gitignore
	alias lg="eza -l -F --header --icons -a -g -T --git --git-repos --git-ignore"
fi
```

> Для корректного вывода иконок в системе должен быть установлен шрифт `Nerd`.

## Поведение `cp`

При попытке копирования файла в несуществующую директорию инструмент `cp` не создаст нужные каталоги, а сообщит об отсутствии пути. Изменить это поведение можно с помощью небольшого скрипта в файле настроек и псевдонима.

```bash
# Автоматическое создание пути
mkcp() {
    test -d "${@: -1}" || mkdir -p "${@: -1}"
    cp "$@"
}
# и создадим псевдоним
alias cp=mkcp
```

## Midnight Commander

Двухпанельный файловый менеджер. Далекий потомок NortonCommander. Установит с собой редактор `mcedit`.

```bash
sudo apt install -y mc
```

## tmux

Терминальный мультиплексор. Подробнее об установке и настройке - [Tmux - установка, настройка, использование](Tmux - установка, настройка, использование.md).

```bash
sudo apt install -y tmux
```

## Micro

Простой (не Vim подобный) консольный редактор. Конечно можно поспорить об удобстве и преимуществах VIM\`а, но сейчас не об этом. Имеет командный режим, темы и систему плагинов. В хозяйстве пригодится, особенно если до сих пор не освоен `Vi/Vim/NeoVim`.

```bash
sudo apt install -y micro
```

Сохранение файла - `Ctrl` + `s`. Выход из редактора - `Ctrl` + `q`.

Редактор имеет большое количество возможностей. Рекомендуется почитать про него подробней. Здесь для примера сменим тему и установим плагин отображающий дерево файлов.

Нажмем `Ctrl`+`E` чтобы попасть в командный режим. В появившейся командной строке написать `set colorscheme solarized` (или выбрать другую тему, для чего после `set colorscheme` поставить пробел и нажать `Tab`, затем с помощью `Tab` выбрать необходимую). Настройки автоматически сохранятся в файл `~/.config/micro/settings.json`.

Чтобы установить плагин для управления файлами, нужно нажать `Ctrl + E` и в командной строке написать `plugin install filemanager`. Открыть плагин можно командой `tree` в командной консоли редактора.

Доступные плагины - https://micro-editor.github.io/plugins.html.

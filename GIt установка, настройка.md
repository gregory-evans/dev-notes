# Установка и настройка Git в Linux, WSL и Windows.

Опустим рассуждения о том зачем нужен Git и чем он хорош. Придерживаясь формата без отлагательств приступим к установке и настройке.

> Клиентов этой системы значительно больше чем один. Существуют даже полноценные GUI версии, например "Github Desktop" от самих github.com. Я рассмотрю только консольные версии.

## Установка

### Windows

Здесь я использую максимально дефолтный клиент,  который можно взять по адресу https://git-scm.com/install/windows. Скачиваем подходящую для нашей системе версию (x64/Arm64) и устанавливаем как обычное приложение. При установке можно оставлять все рекомендуемые опции.

Есть возможность установить это приложение с помощью `winget tool`:

```cmd
winget install --id Git.Git -e --source winget
```

### Linux, WSL

Установка в этих системах тривиальна:

```bash
sudo apt install -y git
```

> Более подробно про установку в различных дистрибутивах можно почитать здесь: https://git-scm.com/install/linux

## Базовая настройка

Под базовой настройкой я подразумеваю установку своего имени, адреса почты, псевдонимов и исправление бага с кириллицей.

```bash
# Установим личные данные
git config --global user.name "My Name"
git config --global user.email "my@email.com"

# Добавим псевдонимы (не обязательно)
git config --global alias.st status
git config --global alias.ps push
git config --global alias.cm commit
git config --global alias.cl clone

# Исправим проблему с кодировкой (обязательно для WSL)
git config --global core.quotepath off

# Имя главной ветки по умолчанию
git config --global init.defaultBranch main
```

Проверим работоспособность:

![image-20251105032401039](./attach/image-20251105032401039.png)

## Использование SSH ключей

По умолчанию `Git` использует протокол `https` для взаимодействия с сервером, это небезопасно и неудобно. Лучшим решением является использование другого протокола `ssh` или `git`, в которых для аутентификации используются сертификаты безопасности.

В Linux (WSL) пары ключей находятся в директории `~/.ssh/`. Убедившись в их существовании или отсутствии можно определить наличие у вас ssh ключей.

> В Windows ключи располагаются в директории `%homepath%\.ssh\`

Если ключей нет, то их можно сгенерировать:

```bash
ssh-keygen -t ed25519 -C "my@email.com"
```

> Для RSA
>
> ```bash
> ssh-keygen -t rsa -b 4096 -C "my@mail.com"
> ```
>
> Однако, этот алгоритм считается менее надежным.

Утилита спросит куда сохранять файлы - просто нажмите `Enter` (сохраните дефолтный путь). Пароль можно оставить пустым - это пароль от самого файла ключа, а не от github (можно установить для большей безопасности, но его придется вводить каждый раз при взаимодействии с сервером).

В папке `~/.ssh/` появится два файла ключа, `id_ed25519` - приватный ключ и `id_ed25519.pub` - публичный ключ (его мы будем показывать).

Для добавления этого ключа на Github.com нужно выполнить следующие действия:

Сначала скопируем содержимое публичного ключа в буфер обмена:

```bash
cat ~/.ssh/id_ed25519.pub | pbcopy
```

Затем выполним на сайте:

`Иконка профиля` -> `Settings` -> `В меню SSH and GPG keys` -> `New SSH key` -> `Заполнить все поля (Key = содержимое файла id_ed25519.pub)` -> `Add SSH key`.

В завершении, переключим репозиторий на SSH протокол:

```bash
git remote set-url origin git@github.com:login/repo.git
```

Теперь `git push` должен пушить изменения в ваш удаленный репозиторий. Если устанавливали пароль на файл ключа в момент его создания придется его вводить при каждом пуше.

> Иногда может потребоваться явно добавить ключ в ssh агент:
>
> ```bash
> eval "$(ssh-agent -s)" # если агент не запущен
> ssh-add ~/.ssh/id_ed25519
> ```

# Установка и настройка WSL в Windows 10

Сначала необходимо проверить включена ли возможность виртуализации на процессоре. Для этого открыть диспетчер задач (`Ctrl + Shift + Esc`, `Ctrl + Alt + Del`), на вкладке производительность выбрать `ЦП` и убедиться, что параметр `"Виртуализация"` в состоянии `Включено`. Если виртуализация находится в состоянии `"Отключено"`, тогда необходимо в `BIOS` (`UEFI`) включить данную возможность. Необходимо искать раздел `"Advanсed"` или `"CPU Configuration"`. Нужная нам опция часто называется `"Intel Virtualization Technology"` для процессоров Intel или `"SVM Mode"` для процессоров AMD.

## Установка WSL и дистрибутива Debian

Открыть cmd.exe от имени администратора. Выполнить команду:

```cmd
wsl.exe --install -d Debian
```

Затем запустить установленную версию Linux:

```cmd
Debian
```

После прохождения инициализации и создания имени и пароля нового пользователя, виртуальная машина готова к работе. Выйдем из виртуальной машины.

Установим принудительное использование второй версии `WSL`:

```cmd
wsl --set-version Debian 2
```

Если появится сообщение о необходимости обновления компонента ядра для WSL 2, следует выполнить команду:

```cmd
wsl.exe --update
```

> Некоторые полезные данные:
>
> `wsl -l -v` - посмотреть список установленных машин.
>
> Для удаления WSL сначала удалите дистрибутив командой `wsl --unregister <имя_дистрибутива>`, а затем удалите само приложение WSL через «Параметры» > «Приложения» > «Приложения и возможности». Чтобы удалить все связанные с дистрибутивом файлы, можно также вручную очистить папку `%USERPROFILE%\\AppData\\Local\\Packages`

Документация по WSL: https://learn.microsoft.com/ru-ru/windows/wsl/

## Установка и настройка Alacritty

Создадим папки для конфигурации Alacritty:

```cmd
mkdir C:\Users\igrif\AppData\Roaming\alacritty
mkdir C:\Users\igrif\AppData\Roaming\alacritty\themes
```

Поместить файл настроек Alacritty `files\alacritty.toml`  в папку `C:\Users\igrif\AppData\Roaming\alacritty`, а содержимое каталога `files\alacritty-theme-master` в каталог `C:\Users\igrif\AppData\Roaming\alacritty\themes`.

> Темы для Alacritty можно получить из репозитория https://github.com/alacritty/alacritty-theme .

Также необходимо установить недостающие шрифты `Hack Nerd Fonts` из папки `files\Hack` или скачать с сайта https://www.nerdfonts.com/font-downloads.

Теперь можно установить программу `Alacritty`. Дистрибутив находится в директории `files\Alacritty-v0.16.1-installer.msi` или скачать актуальную версию с сайта https://alacritty.org/.

> Можно также использовать Windows Terminal:
>
> https://apps.microsoft.com/detail/9n0dx20hk701?hl=ru-RU&gl=RU

## Настройка копирования в буфер обмена Windows

В общем случае возможно копирование содержимого консоли WSL в буфер обмена Windows с помощью встроенной утилиты Windows `clip.exe`:

```bash
echo "Hello" | clip.exe
```

Но, к сожалению, копирование кириллических символов выполняется со сбоем кодировки. Поэтому лучше использовать другую утилиту, не имеющую такой проблемы: `win32yanc.exe`. Её можно получить из репозитория на гитхабе https://github.com/equalsraf/win32yank/.

После скачивания, необходимо переместить исполняемый файл в любую директорию Windows находящуюся в переменной `Path`, например `C:\WINDOWS\System32`. С этого момента станет доступна операция копирования в буфер обмена Windows включая кириллические символы

```bash
echo "Привет" | win32yank.exe
```

В Linux для выполнения такой операция служит утилита `pbcopy`, поэтому для удобства добавим алиас для этой команды в шелл. 

```bash
#~.zshrc
[...]
alias pbcopy="win32yank.exe -i"
```

> Получить содержимое буфера обмена в консоль можно командой `win32yank.exe -o`
>
> Также можно создать алиас:
>
> ```bash
> #~.zshrc
> [...]
> alias pbpaste="win32yank.exe -o"
> ```


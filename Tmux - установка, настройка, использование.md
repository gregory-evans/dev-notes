# TMUX

`Tmux` - это утилита мультиплексор. Она решает задачу предоставления доступа к нескольким терминалам в рамках одного экрана. Также она сохраняет состояние сессий даже при отключении пользователя от терминала (между рабочими сессиями). Полезна в задаче многооконной организации рабочего пространства при отсутствии подобной возможности у терминальной программы (например Alacritty). Является развитием мультиплексора Screen.

## Принцип работы

Сервер `tmux` создает **сессию** как совокупность некоторого количество (от одного) псевдотерминалов. В рамках **сессии** может быть создано одно или несколько **окон**. Экран может отображать одно **окно** или разделен на некоторое количество так называемых **панелей**, каждой из которых принадлежит псевдотерминал. 

## Установка

 ```bash
 $ sudo apt install -y tmux
 ```

## Настройка

Установим набор скриптов и настроек `Oh-my-tmux`. Репозиторий проекта - https://github.com/gpakosz/.tmux. Берем с главной страницы проекта необходимые команды и выполняем:

```bash
curl -fsSL "https://github.com/gpakosz/.tmux/raw/refs/heads/master/install.sh#$(date +%s)" | bash
```

В конфигурационном файле `~/.config/tmux/tmux.conf.local` найти следующие строки и раскомментировать их:

```bash
#tmux_conf_theme_left_separator_main='\uE0B0'  # /!\ you don't need to install Powerline
#tmux_conf_theme_left_separator_sub='\uE0B1'   #   you only need fonts patched with
#tmux_conf_theme_right_separator_main='\uE0B2' #   Powerline symbols or the standalone
#tmux_conf_theme_right_separator_sub='\uE0B3'  #   PowerlineSymbols.otf font, see README.md

```

> *находящиеся выше 4 строки при этом нужно закомментировать*

## Использование

Управлять `tmux` можно двумя способами - командами и клавиатурными сокращениями. Самая распространенная схема такова - запуск, подключение к сессии, просмотр списка сессий с помощью команд, а управление внутри мультиплексора - с помощью сокращений.

Команды:

> Команды используются из командной строки как `tmux command_name [parameters]` . Или в командном режиме внутри  `prefix` + `:` + `command`.

| Команда                              | Описание                                                     |
| ------------------------------------ | ------------------------------------------------------------ |
| `list-commands`                      | Вывод всех доступных команд.                                 |
| `new [-s name_of_session]`           | Новая сессия. Если указан параметр - именованная.            |
| `attach [-t name_of_session]`        | Присоединение к существующей сессии.                         |
| `attach || tmux new`                 | Правильный запуск `tmux`. Попытка присоединения. Если не существует, то создание новой сессии. |
| `ls`, `list-sessions`                | Список сессий.                                               |
| `kill-session [-t name_of_session]`  | Закрыть сессии. Если используется параметр, то с именем.     |
| `kill-server`                        | Закрыть все сессии.                                          |
| `list-clients [-t name_of_session] ` | Список клиентов.                                             |
| `split-window -h`                    | Разделить панель горизонтально.                              |
| `split-window -v`                    | Разделить панель вертикально.                                |

Клавиатурные сокращения:

> `prefix` это управляющий префикс. по умолчанию это сочетание `Ctrl + B`. В `Oh-my-tmux` переназначено на `Ctrl + A`.
>
> В общем случае любому клавиатурному сокращению соответствует команда.

| Сочетание                      | Описание                                                     |
| ------------------------------ | ------------------------------------------------------------ |
| `prefix` + `d`                 | Отключиться от сессии                                        |
| `prefix` + `s`                 | Список сессий. Выбор стрелками.                              |
| `prefix` + `c`                 | Создать новое окно (в рамках сессии)                         |
| `prefix` + `w`                 | Список окон. Выбор стрелками.                                |
| `prefix` + `n`                 | Перейти в следующее окно.                                    |
| `prefix` + `p`                 | Перейти в предыдущее окно.                                   |
| `prefix` + `l`                 | Перейти в предыдущее активное окно.                          |
| `prefix` + `0..9`              | Выбор окна по номеру.                                        |
| `prefix` + `&`                 | Закрыть окно. (Можно набрать `exit` в терминале)             |
| `prefix` + `"`, `prefix` + `-` | Разделить панель на две горизонтально.                       |
| `prefix` + `%`, `prefix` + `_` | Разделить панель на две вертикально.                         |
| `prefix` + `Arrows`            | Выбор панели.                                                |
| `prefix` + `Ctrl` + `Arrows`   | Изменение размера панелей.                                   |
| `prefix` + `x`                 | Выход из панели, окна.                                       |
| `prefix` + `r`                 | Перезагрузить конфигурацию.                                  |
| `prefix` + `PgUp`              | Войти в режим копирования. Скролл с помощью клавиш `PgUp` и `PgDown`. `q` - выход из режима копирования. |

Это лишь краткий список самых основных команд и сокращений. Полный список команд можно посмотреть с помощью `tmux list-commands` , список клавиатурных сокращений с помощью `tmux list-keys`.
